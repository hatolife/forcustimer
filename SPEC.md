# Focus Timer - 機能仕様書

## 1. プロジェクト概要

### 1.1 プロジェクト名

Focus Timer (forcustimer)

### 1.2 概要

シンプルで使いやすいポモドーロタイマーのPWA (Progressive Web App)。
25分の作業時間と5分の休憩時間を管理し、集中力を最大化するための生産性ツール。

### 1.3 公開URL

https://focus.hato.life/

### 1.4 ライセンス

CC0 1.0 Universal (Public Domain)

## 2. タイマー機能

### 2.1 タイマーモード

#### 2.1.1 Workモード

- **時間**: 25分 (1500秒)
- **用途**: 作業時間の管理
- **完了時メッセージ**: 「作業終了!」
- **ボタン動作**: クリックで即座にタイマーを開始

#### 2.1.2 Breakモード

- **時間**: 5分 (300秒)
- **用途**: 休憩時間の管理
- **完了時メッセージ**: 「休憩終了!」
- **ボタン動作**: クリックで即座にタイマーを開始

#### 2.1.3 Customモード

- **時間**: ユーザー指定 (分・秒)
- **設定範囲**:
  - 分: 0〜999分
  - 秒: 0〜59秒
- **入力方法**:
  - 数値入力フィールド (分・秒)
  - 入力はリアルタイムで反映
  - Setボタンなし（入力即反映）
- **完了時メッセージ**: 「タイマー終了!」

### 2.2 タイマー操作

#### 2.2.1 Start (開始)

- タイマーを開始
- **表示条件**: 開始前（idle状態）のみ表示
- **Enterキー**: タイマー停止中にEnterキーで開始

#### 2.2.2 Pause (一時停止)

- タイマーを一時停止
- 現在の残り時間を保持
- **表示条件**: タイマー実行中のみ表示
- **Enterキー**: タイマー実行中にEnterキーで一時停止

#### 2.2.3 Reset (リセット)

- タイマーをリセット
- 残り時間をモードのデフォルト値に戻す
- **表示条件**: タイマー実行中のみ表示

#### 2.2.4 完了画面

- **ボタン表示**: Start, Pause, Resetは全て非表示
- 完了メッセージとモード切替ボタンのみ表示

#### 2.2.5 モード切替

- WorkモードとBreakモードボタンは常に表示
- クリックすると即座にタイマーをリセットして開始

### 2.3 タイマー表示

- **時間表示**: MM:SS形式 (例: 25:00, 05:00, 01:30)
- **モード表示**: Work / Break / Custom
- **更新頻度**: リアルタイム (滑らかな表示)

## 3. 通知機能

### 3.1 通知許可

#### 3.1.1 通知未許可の場合

- 右上にベルアイコン（斜線付き）を表示
- アイコンクリックで通知許可をリクエスト

#### 3.1.2 通知許可後

- テスト通知を表示: 「通知が有効になりました - タイマー終了時に通知が表示されます」
- ベルアイコンを非表示

#### 3.1.3 通知許可済みの場合

- ベルアイコンは表示されない

### 3.2 タイマー完了通知

#### 3.2.1 Workモード完了

- **タイトル**: 「作業終了!」
- **本文**: 「25分の作業お疲れ様でした!」

#### 3.2.2 Breakモード完了

- **タイトル**: 「休憩終了!」
- **本文**: 「5分の休憩終了です!」

#### 3.2.3 Customモード完了

- **タイトル**: 「タイマー終了!」
- **本文**: 「カスタムタイマーが終了しました!」

### 3.3 対応環境

- **デスクトップブラウザ**: Windows Chrome, macOS Safari, Firefox, Edge
- **モバイルブラウザ**: iOS Safari (PWA), Android Chrome
- **必須**: 通知許可が必要

## 4. UI/UX機能

### 4.1 完了エフェクト

タイマー完了時に以下のエフェクトを表示:

- コンテナの背景色変更
- タイマー表示のアニメーション効果
- 完了メッセージの表示
- 操作ボタン（Start/Pause/Reset）を非表示

### 4.2 ボタン表示制御

#### 4.2.1 開始前 (idle状態)

- **Start**: 表示
- **Pause**: 非表示
- **Reset**: 非表示
- **Work/Breakボタン**: 表示（クリックで即開始）
- **カスタムタイマー入力欄**: 表示

#### 4.2.2 実行中 (running状態)

- **Start**: 非表示
- **Pause**: 表示
- **Reset**: 表示
- **Work/Breakボタン**: 非表示
- **カスタムタイマー入力欄**: 非表示

#### 4.2.3 一時停止中 (paused状態)

- **Start**: 表示（再開用）
- **Pause**: 非表示
- **Reset**: 表示
- **Work/Breakボタン**: 表示（クリックで即開始）
- **カスタムタイマー入力欄**: 表示

#### 4.2.4 完了時 (completed状態)

- **Start**: 非表示
- **Pause**: 非表示
- **Reset**: 非表示
- **Work/Breakボタン**: 表示（クリックで即開始）
- **カスタムタイマー入力欄**: 表示

### 4.3 キーボード操作

- **Enterキー**:
  - タイマー停止中: Startを実行
  - タイマー実行中: Pauseを実行
- **Tab/Shift+Tab**: フォーカス移動

### 4.4 レスポンシブデザイン

- デスクトップ
- タブレット
- スマートフォン (縦・横)
- 超小画面デバイス

全ての画面サイズで快適に使用可能。

## 5. PWA機能

### 5.1 オフライン対応

- ネットワーク接続なしで動作可能
- 初回アクセス後は全機能が利用可能
- Service Workerによる自動キャッシング

### 5.2 インストール機能

#### 5.2.1 デスクトップ

- ブラウザの「インストール」ボタンから追加
- アプリとして独立したウィンドウで起動

#### 5.2.2 モバイル

- 「ホーム画面に追加」でインストール
- アプリアイコンから直接起動
- フルスクリーンで表示

### 5.3 アプリアイコン

- 8サイズ対応: 72x72, 96x96, 128x128, 144x144, 152x152, 192x192, 384x384, 512x512px
- 全てのデバイスで最適なアイコンを表示

### 5.4 ショートカット

#### 5.4.1 Workショートカット

- 名前: 「Start Work Timer」
- 説明: 「25分の作業タイマーを開始」
- URL: `/?mode=work`

#### 5.4.2 Breakショートカット

- 名前: 「Start Break Timer」
- 説明: 「5分の休憩タイマーを開始」
- URL: `/?mode=break`

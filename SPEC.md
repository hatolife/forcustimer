# Focus Timer - 機能仕様書

## 1. プロジェクト概要

### 1.1 プロジェクト名

Focus Timer (forcustimer)

### 1.2 概要

シンプルで使いやすいポモドーロタイマーのPWA (Progressive Web App)。
25分の作業時間と5分の休憩時間を管理し、集中力を最大化するための生産性ツール。

### 1.3 公開URL

https://focus.hato.life/

### 1.4 ライセンス

MIT License

## 2. タイマー機能

### 2.1 タイマーモード

#### 2.1.1 Workモード

- **時間**: 25分 (1500秒)
- **用途**: 作業時間の管理
- **完了時メッセージ**: 「作業時間終了！お疲れ様でした！」

#### 2.1.2 Breakモード

- **時間**: 5分 (300秒)
- **用途**: 休憩時間の管理
- **完了時メッセージ**: 「休憩時間終了！」

#### 2.1.3 Customモード

- **時間**: ユーザー指定 (分・秒)
- **設定範囲**:
  - 分: 0〜999分
  - 秒: 0〜59秒
- **入力方法**:
  - 数値入力フィールド (分・秒)
  - 「Set」ボタンで適用
  - Enterキーでも設定可能
- **完了時メッセージ**: 「カスタムタイマー終了！」

### 2.2 タイマー操作

#### 2.2.1 Start (開始)

- タイマーを開始
- 開始後はPauseとResetボタンのみ有効

#### 2.2.2 Pause (一時停止)

- タイマーを一時停止
- 現在の残り時間を保持
- 一時停止後はStartとResetボタンのみ有効

#### 2.2.3 Reset (リセット)

- タイマーをリセット
- 残り時間をモードのデフォルト値に戻す
- リセット後はStartボタンのみ有効

#### 2.2.4 モード切替

- WorkモードとBreakモードを切り替え可能
- モード切替時は自動的にタイマーをリセット

### 2.3 タイマー表示

- **時間表示**: MM:SS形式 (例: 25:00, 05:00, 01:30)
- **モード表示**: Work / Break / Custom
- **更新頻度**: リアルタイム (滑らかな表示)

## 3. 通知機能

### 3.1 通知許可

#### 3.1.1 通知未許可の場合

- 右上にベルアイコン（斜線付き）を表示
- アイコンクリックで通知許可をリクエスト

#### 3.1.2 通知許可後

- テスト通知を表示: 「通知が有効になりました - タイマー終了時に通知が表示されます」
- ベルアイコンを非表示

#### 3.1.3 通知許可済みの場合

- ベルアイコンは表示されない

### 3.2 タイマー完了通知

#### 3.2.1 Workモード完了

- **タイトル**: 「作業時間終了!」
- **本文**: 「25分の作業お疲れ様でした!」

#### 3.2.2 Breakモード完了

- **タイトル**: 「休憩時間終了!」
- **本文**: 「5分の休憩終了です!」

#### 3.2.3 Customモード完了

- **タイトル**: 「カスタムタイマー終了!」
- **本文**: 「カスタムタイマーが終了しました!」

### 3.3 対応環境

- **デスクトップブラウザ**: Windows Chrome, macOS Safari, Firefox, Edge
- **モバイルブラウザ**: iOS Safari (PWA), Android Chrome
- **必須**: 通知許可が必要

## 4. UI/UX機能

### 4.1 完了エフェクト

タイマー完了時に以下のエフェクトを表示:

- コンテナの背景色変更
- タイマー表示のアニメーション効果
- 完了メッセージの表示

### 4.2 ボタン状態管理

#### 4.2.1 idle状態 (初期状態・リセット後)

- **Start**: 有効
- **Pause**: 無効
- **Reset**: 無効

#### 4.2.2 running状態 (タイマー実行中)

- **Start**: 無効
- **Pause**: 有効
- **Reset**: 有効

#### 4.2.3 paused状態 (一時停止中)

- **Start**: 有効 (再開)
- **Pause**: 無効
- **Reset**: 有効

### 4.3 レスポンシブデザイン

- デスクトップ
- タブレット
- スマートフォン (縦・横)
- 超小画面デバイス

全ての画面サイズで快適に使用可能。

## 5. PWA機能

### 5.1 オフライン対応

- ネットワーク接続なしで動作可能
- 初回アクセス後は全機能が利用可能
- Service Workerによる自動キャッシング

### 5.2 インストール機能

#### 5.2.1 デスクトップ

- ブラウザの「インストール」ボタンから追加
- アプリとして独立したウィンドウで起動

#### 5.2.2 モバイル

- 「ホーム画面に追加」でインストール
- アプリアイコンから直接起動
- フルスクリーンで表示

### 5.3 アプリアイコン

- 8サイズ対応: 72x72, 96x96, 128x128, 144x144, 152x152, 192x192, 384x384, 512x512px
- 全てのデバイスで最適なアイコンを表示

### 5.4 ショートカット

#### 5.4.1 Workショートカット

- 名前: 「Start Work Timer」
- 説明: 「25分の作業タイマーを開始」
- URL: `/?mode=work`

#### 5.4.2 Breakショートカット

- 名前: 「Start Break Timer」
- 説明: 「5分の休憩タイマーを開始」
- URL: `/?mode=break`

## 6. アクセシビリティ

### 6.1 基本対応

- セマンティックHTML使用
- キーボード操作対応
  - Enterキー: カスタムタイマー設定
  - Tab/Shift+Tab: フォーカス移動
- aria-label属性: 通知ベルアイコン

### 6.2 将来的な改善案

- スクリーンリーダー完全対応
- キーボードショートカット (Space: Start/Pause, R: Reset等)
- ハイコントラストモード

## 7. ブラウザ互換性

### 7.1 対応ブラウザ

- ✅ Chrome (最新版)
- ✅ Edge (最新版)
- ✅ Firefox (最新版)
- ✅ Safari (最新版)
- ✅ iOS Safari (PWA対応)
- ✅ Android Chrome (PWA対応)

### 7.2 必須機能

- Notification API
- Service Worker API
- Web App Manifest

## 8. 制約事項

### 8.1 現在サポートされていない機能

- 統計・履歴機能
- セッション数のカウント
- 音声通知
- バイブレーション
- テーマカスタマイズ
- ユーザー設定の保存

### 8.2 技術的制約

- 通知はブラウザ/OSの設定に依存
- オフライン時は初回アクセス後のみ動作
- HTTPS環境が必須 (Service Worker)

## 9. 今後の拡張案

### 9.1 機能追加候補

1. **統計機能**
   - 作業セッション数のカウント
   - 1日/1週間/1ヶ月の合計作業時間
   - グラフ表示

2. **履歴機能**
   - 過去のタイマー記録
   - 日付別の作業履歴

3. **長期休憩モード**
   - 15分または20分の長期休憩
   - 4セッションごとに自動提案

4. **音声通知**
   - 完了時にサウンド再生
   - カスタムサウンド選択

5. **テーマ機能**
   - ダークモード
   - カラーテーマ選択
   - 背景画像設定

6. **設定の保存**
   - デフォルトモード
   - 通知のON/OFF
   - サウンドの音量

### 9.2 UX改善候補

1. キーボードショートカット
2. タスク名の入力
3. 作業内容のメモ
4. 目標設定機能
5. 達成バッジ/アチーブメント

## 10. お問い合わせ・フィードバック

### 10.1 リポジトリ

GitHub: https://github.com/hatolife/forcustimer

### 10.2 Issue報告

バグ報告・機能要望: GitHub Issues

### 10.3 貢献方法

1. Fork
2. Feature Branch作成
3. 修正・機能追加
4. Pull Request作成

## 11. 変更履歴

### v0.1.0 (初期リリース)

- 基本タイマー機能 (Work 25分 / Break 5分)
- カスタムタイマー機能 (分・秒指定)
- 通知機能 (PC/iOS PWA対応)
- PWA対応 (オフライン、インストール)
- レスポンシブデザイン
